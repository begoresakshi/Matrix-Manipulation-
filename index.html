<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Matrix Operations with Visualization</title>
<style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: 40px auto; padding: 10px; }
    h1 { text-align: center; color: #004466; }
    textarea { width: 100%; height: 100px; font-family: monospace; margin-bottom: 10px; font-size: 14px; }
    label { font-weight: bold; display: block; margin-top: 15px; }
    select, button { padding: 10px; margin-top: 12px; font-size: 16px; width: 100%; border-radius: 4px; border: 1px solid #ccc; }
    button { background-color: #004466; color: white; cursor: pointer; }
    button:hover { background-color: #006699; }
    .error { color: red; font-weight: bold; margin-top: 15px; }
    .result { white-space: pre-wrap; background: #f9f9f9; border: 1px solid #ccc; padding: 15px; font-family: monospace; margin-top: 20px; }
    .plot-image { margin-top: 20px; text-align: center; }
</style>
</head>
<body>
<h1>Matrix Operations with Visualization</h1>

<form method="post">
    <label for="matrix_a">Matrix A (rows separated by newlines, values by spaces):</label>
    <textarea id="matrix_a" name="matrix_a" required>{{ request.form.matrix_a }}</textarea>

    <label for="matrix_b">Matrix B (Required for addition, subtraction, multiplication):</label>
    <textarea id="matrix_b" name="matrix_b">{{ request.form.matrix_b }}</textarea>

    <label for="operation">Select Operation:</label>
    <select id="operation" name="operation" required>
        <option value="">--Choose an operation--</option>
        <option value="add" {% if request.form.operation == 'add' %}selected{% endif %}>Addition</option>
        <option value="subtract" {% if request.form.operation == 'subtract' %}selected{% endif %}>Subtraction</option>
        <option value="multiply" {% if request.form.operation == 'multiply' %}selected{% endif %}>Multiplication</option>
        <option value="transpose" {% if request.form.operation == 'transpose' %}selected{% endif %}>Transpose (Matrix A only)</option>
        <option value="determinant" {% if request.form.operation == 'determinant' %}selected{% endif %}>Determinant (Matrix A only)</option>
    </select>

    <button type="submit">Calculate</button>
</form>

{% if error %}
    <p class="error">{{ error }}</p>
{% endif %}

{% if result %}
    <div class="result"><strong>Result:</strong>
    <pre>{{ result }}</pre>
    </div>
{% endif %}

{% if plot_img %}
    <div class="plot-image">
        <h3>Graphical Visualization</h3>
        <img src="data:image/png;base64,{{ plot_img }}" alt="Matrix Visualization" />
    </div>
{% endif %}

</body>
</html>
